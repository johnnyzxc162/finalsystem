# This is the main build configuration for your site.
[build]
  # This command tells Netlify to run your setup.php script during deployment.
  # This script should connect to your database and create the necessary tables.
  command = "php setup.php"

  # This tells Netlify that the files for your live site are in the root directory.
  publish = "."

# This section configures your serverless functions (your PHP API).
[functions]
  # This is a critical setting. It tells Netlify to include these folders 
  # so your PHP functions can access the database connection and class files.
  included_files = ["vendor/**", "config/**", "classes/**", "db/**"]

# This section applies a specific configuration to all files inside your 'api/' folder.
[functions."api/*"]
  # This tells Netlify to use the 'bref' community runtime, which knows how to execute PHP.
  runtime = "bref"